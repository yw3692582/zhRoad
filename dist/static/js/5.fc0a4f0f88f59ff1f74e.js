webpackJsonp([5],{gttO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("fZjL"),n=a.n(r),o=a("7lgi"),l={data:function(){return{getSearchInfo:[],pagesize:Object(o.a)(),currpage:1,searchTableInfo:""}},computed:{tableData:function(){var e=this.searchTableInfo;return e?this.getSearchInfo.filter(function(t){return n()(t).some(function(a){return String(t[a]).toLowerCase().indexOf(e)>-1})}):this.getSearchInfo}},methods:{handleCurrentChange:function(e){this.currpage=e},setCellStyle:function(e){var t=e.row;e.column,e.rowIndex;if(2==e.columnIndex&&0===t.status)return{color:"red"}},getRowClass:function(e,t,a,r){return"background:#f1f3fa;color:rgba(0,0,0,85);"},status:function(){var e=this,t=this.$ajax.defaults.headers.common;t.token=localStorage.getItem("token"),t.username=localStorage.getItem("user_name"),this.$ajax.post("/equip_all_info").then(function(t){if(-1==t.data.code)return alert("登录已失效,请重新登录!"),localStorage.clear(),void e.$router.push("/");console.log(t.data.records);var a=t.data.records;e.getSearchInfo=a}).catch(function(e){console.log(e)})},formatter:function(e,t){switch(t){case 1:return"在线";default:return"离线"}},dataFormatter:function(e,t){if(e.obs_time)return moment(1e3*e.obs_time).format("YYYY-MM-DD HH:mm:ss")}},mounted:function(){this.status()}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currpage-1)*e.pagesize,e.currpage*e.pagesize),border:"","row-style":e.getRowClass,"header-row-style":e.getRowClass,"header-cell-style":e.getRowClass,"cell-style":e.setCellStyle}},[a("el-table-column",{attrs:{prop:"obs_time",align:"center",label:"时间",formatter:e.dataFormatter,"min-width":"175px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"station_name",align:"center",label:"设备号","min-width":"175px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"设备状态",align:"center","min-width":"175px"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{"prefix-icon":"el-icon-search",size:"mini",placeholder:"输入关键字搜索"},model:{value:e.searchTableInfo,callback:function(t){e.searchTableInfo=t},expression:"searchTableInfo"}})]}},{key:"default",fn:function(t){return[a("span",{domProps:{innerHTML:e._s(e.formatter(t,t.row.status))}})]}}])})],1),e._v(" "),a("el-pagination",{attrs:{background:"","page-size":e.pagesize,layout:"total, prev, pager, next, jumper",total:e.tableData.length},on:{"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("vwiW")},"data-v-68b09516",null);t.default=c.exports},vwiW:function(e,t){}});