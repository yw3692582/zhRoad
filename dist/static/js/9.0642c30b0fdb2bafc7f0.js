webpackJsonp([9],{"0BZq":function(e,t){},VZrM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={formatTime:function(e,t){var a=new Date(e),i=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return i(a.getFullYear());case"MM":return i(a.getMonth()+1);case"mm":return i(a.getMinutes());case"dd":return i(a.getDate());case"HH":return i(a.getHours());case"ss":return i(a.getSeconds())}})}},r={data:function(){return{show:!1,time:"",eid:"",feature_filter:"",tableData:[],elements:[],stations:[],obj:[],eid_key:[],feature_filter_key:[],page:1,numbers:0,rowIndex:"",columnIndex:"",s:[],size:"17",loading:!1,currentPage1:null}},methods:{getRowClass:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"background:#f1f3fa;color:rgba(0,0,0,85);border-color: #eeeeee;"},handleCurrentChange:function(e){this.page=e},selectStation:function(e){this.eid=e},selectStations:function(e){this.feature_filter=e},b:function(){var e=this;if(this.loading=!0,setTimeout(function(){e.loading&&(e.$message({type:"warning",message:"请求超时,请刷新页面重新请求！"}),e.loading=!1)},5e3),this.page=1,this.currentPage1=1,""==this.time||""==this.eid)return this.$message({type:"warning",message:"参数不能为空"}),void(this.loading=!1);for(var t=0;t<this.time.length;t++){var a=this.time[t],r=Math.round(a);this.time[t]=r}this.eid_key=[];for(var n=0;n<this.eid.length;n++)this.eid_key.push(this.eid[n].key);this.feature_filter_key=[];for(var l=0;l<this.feature_filter.length;l++)this.feature_filter_key.push(this.feature_filter[l].key);this.s=[],this.$ajax.defaults.headers.common.token=localStorage.getItem("token"),this.$ajax.post("/features_his",{start_time:this.time[0],end_time:this.time[1],eid:this.eid_key,feature_filter:this.feature_filter_key,page:this.page,size:this.size.toString()}).then(function(t){if(-1==t.data.code)return localStorage.clear(),void(top.location.href="http://zhgl.hngl.cn:8080/auth-server/login");if(e.loading=!1,0!=t.data.records.length){var a=t.data.records;e.tableData=a;for(var r=0;r<e.eid.length;r++)for(var n=0;n<e.tableData.length;n++)e.eid[r].key==e.tableData[n].eid&&(e.tableData[n].eid=e.eid[r].value);e.numbers=t.data.numbers;for(var l=0;l<a.length;l++)e.s.push(a[l].q_code);switch(e.feature_filter.length){case 0:e.obj=[{label:"站台",prop:"eid",fixed:"left",minWidth:"200px"},{label:"时间",prop:"obs_date",fixed:"left",minWidth:"200px"}];break;default:e.obj=[{label:"站台",prop:"eid",fixed:"left",minWidth:"200px"},{label:"时间",prop:"obs_date",fixed:"left",minWidth:"200px"}]}for(var s=0;s<e.feature_filter.length;s++)e.obj.push({label:e.feature_filter[s].value,prop:e.feature_filter[s].key,minWidth:"140px"});for(var o=0;o<a.length;o++){var c=a[o].obs_date,d=i.formatTime(1e3*c,"yyyy-MM-dd HH:mm:ss");a[o].obs_date=d}}else e.$message({type:"warning",message:"此设备无数据！"})}).catch(function(e){console.log(e)})},resolution:function(){var e=screen.width,t=document.querySelectorAll(".el-select"),a=document.querySelectorAll(".demonstration"),i=document.querySelectorAll(".el-date-editor.el-range-editor.el-input__inner.el-date-editor--daterange");switch(e){case 1600:case 1440:case 1400:t[0].style.width="280px",t[1].style.width="200px";for(var r=0;r<a.length;r++)a[r].style.marginLeft="6px";i[0].style.width="320px",this.size="15";break;case 1360:case 1366:t[1].style.width="200px";for(var n=0;n<a.length;n++)a[n].style.marginLeft="6px";i[0].style.width="250px",this.size="10"}},feature:function(){var e=this;this.$ajax.defaults.headers.common.token=localStorage.getItem("token"),this.$ajax.post("/reverse_features").then(function(t){if(-1==t.data.code)return localStorage.clear(),void(top.location.href="http://zhgl.hngl.cn:8080/auth-server/login");e.elements=t.data.records}).catch(function(e){console.log(e)})},equ:function(){var e=this;this.$ajax.defaults.headers.common.token=localStorage.getItem("token"),this.$ajax.post("/equip_name",{e_code:""}).then(function(t){if(-1==t.data.code)return alert("登陆已失效，请重新登陆！"),localStorage.clear(),void(top.location.href="http://zhgl.hngl.cn:8080/auth-server/login");e.stations=t.data.records}).catch(function(e){console.log(e)})}},mounted:function(){this.equ(),this.feature(),this.resolution()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"box"},[a("div",{staticClass:"block"},[a("div",{staticStyle:{"margin-left":"43px"}},[a("span",{staticClass:"demonstration"},[e._v("选择日期：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1),e._v(" "),a("div",{staticClass:"block_1"},[a("span",{staticClass:"demonstration"},[e._v("站台配置：")]),e._v(" "),a("el-select",{staticStyle:{width:"220px"},attrs:{filterable:"",clearable:"",multiple:"",placeholder:"搜索/选择站台配置","collapse-tags":!0},on:{change:e.selectStation},model:{value:e.eid,callback:function(t){e.eid=t},expression:"eid"}},e._l(e.stations,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e}})}),1),e._v(" "),a("span",{staticClass:"demonstration"},[e._v("要素配置：")]),e._v(" "),a("el-select",{staticStyle:{width:"300px"},attrs:{id:"select_id",filterable:"",clearable:"",multiple:"",placeholder:"搜索/选择要素配置","collapse-tags":""},on:{change:e.selectStations},model:{value:e.feature_filter,callback:function(t){e.feature_filter=t},expression:"feature_filter"}},e._l(e.elements,function(e){return a("el-option",{key:e.key,attrs:{label:e.value,value:e}})}),1),e._v(" "),a("el-button",{staticStyle:{"font-size":"16px",width:"84px","border-radius":"5px"},attrs:{type:"primary"},on:{click:function(t){return e.b()}}},[e._v("查询")])],1)]),e._v(" "),a("div",{staticClass:"table-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"0 auto"},attrs:{"element-loading-text":"加载中,请稍等","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(245,245,245, 0.8)",data:e.tableData.slice((e.page-1)*e.size,e.page*e.size),border:"","max-height":"682","row-style":e.getRowClass,"header-row-style":e.getRowClass,"header-cell-style":e.getRowClass}},[e._l(e.obj,function(e,t){return[a("el-table-column",{key:t,attrs:{prop:e.prop,"min-width":e.minWidth,label:e.label,fixed:e.fixed,align:"center"}})]})],2),e._v(" "),a("el-pagination",{attrs:{background:"","current-page":e.currentPage1,"page-size":e.size,layout:"total, prev, pager, next, jumper",total:e.tableData.length},on:{"update:currentPage":function(t){e.currentPage1=t},"update:current-page":function(t){e.currentPage1=t},"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]};var l=a("VU/8")(r,n,!1,function(e){a("0BZq")},"data-v-16fbc530",null);t.default=l.exports}});